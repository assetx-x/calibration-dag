{
  "Timezone": pytz.timezone("US/Eastern"),
  "run_description": {
    "run_datetime": datetime.now().strftime("%Y%m%d_%H%M%S_%f"),
    "run_name": "intuitionTrading"
  },
  "logging": {
    "config_filename": "backtesting_logging.py",
    "config_location" : path.abspath(path.dirname(__file__)),
    "logging_location" : path.abspath(path.join(path.dirname(__file__), "logs")),
    "log_all_system_messages": True,
    "max_file_size": 20971520,
    "backup_count": 20
  },
  "ExecutionInstructions": {
    "DEFAULT_TIME_DELTA_IN_DAYS" : 2,
  },
  "DCMTradingActor": {
    "ASOFTIME_TIMEDELTA_BUFFER_FOR_ACT": timedelta(minutes=4),
    "ACTUALTIME_TIMEDELTA_BUFFER_FOR_ACT": timedelta(hours=4),
    "INITIAL_ASOFTIME_FOR_DATA_UPDATE": pd.Timestamp(datetime(1990, 1, 1)).tz_localize("EST")
  },
  "PairTrader": {
    "MARGIN_PERCENTAGE": 0.50,
    "EXECUTION_TIME_LIMIT": timedelta(days=3),
    "cool_offs": {
      "request": timedelta(hours=2),
      "enter_market": timedelta(hours=4),
      "exit_market_stop_loss": timedelta(days=4),
      "exit_market_stop_gain": timedelta(hours=1)
    }
  },
  "RavenpackEventTrader": {
    "EXECUTION_TIME_LIMIT": timedelta(days=3),
    "cool_offs": {
      "request": timedelta(hours=2),
      "enter_market": timedelta(hours=4),
      "exit_market_stop_loss": timedelta(days=4),
      "exit_market_stop_gain": timedelta(hours=1)
    },
	"event_filters": {
	  "g_ens": 100,
	  "relevance":100
	}
  },
  "DragonfishTrader": {
	"TRADE_TIME": time(15, 55),
	"LOOKBACK_TOLERANCE": "1B",
	"EXECUTION_TIME_LIMIT": timedelta(minutes=4),
	"cool_offs": {
      "request": timedelta(minutes=1),
      "exit_market_stop_loss": timedelta(days=2),
	  "exit_market_stop_gain": timedelta(hours=1)
    }
  },
  "TestTrader":{
    "TIME_DELTA_IN_MARKET" :  timedelta(minutes=10),
    "TIME_DELTA_OUT_MARKET" : timedelta(minutes=1),
    "EXECUTION_TIME_LIMIT" : timedelta(minutes=15)
  },
    "BuybackTrader": {
    "EXECUTION_TIME_LIMIT": timedelta(days=1),
    "monitor_buffer": "1049T",
    "cool_offs": {
      "request": timedelta(hours=2),
      "enter_market": timedelta(hours=4),
      "exit_market_stop_loss": timedelta(days=4),
      "exit_market_stop_gain": timedelta(days=1)
    },
	"event_filters": {
	  "ens": 100,
	  "g_ens": 100,
	  "relevance":100
	}
  },
  "OLMARTrader": {
    "EXECUTION_TIME_LIMIT": timedelta(days=3),
    "RETRY_LIMIT": timedelta(minutes=10),
    "min_shares_to_trade": 5,
    "MAX_EQUITY_LOOKBACK": "14B",
    "LimitOrderParams": {
      "proportional_adjustment": 0,
      "absolute_adjustment": 0.01
    },
    "VWAPOrderParams": {
      "maxPctVol": 0.10,
      "minimumTimeBlock": "10T",
      "allowPastEndTime": 1,
      "noTakeLiq": 0
    }
  },
  "ViewsInMarketTrader": {
    "EXECUTION_TIME_LIMIT": timedelta(hours=3),
    "RETRY_LIMIT": timedelta(minutes=2),
    "min_shares_to_trade": 5,
    "MAX_EQUITY_LOOKBACK": "5B",
    "LimitOrderParams": {
      "proportional_adjustment": 0,
      "absolute_adjustment": 0.01
    },
    "VWAPOrderParams": {
      "maxPctVol": 0.10,
      "minimumTimeBlock": "10T",
      "allowPastEndTime": 1,
      "noTakeLiq": 0
    }
  },
  "PairTrader_RP": {
    "MARGIN_PERCENTAGE": 0.50,
    "EXECUTION_TIME_LIMIT": timedelta(days=3),
    "cool_offs": {
      "request": timedelta(hours=2),
      "enter_market": timedelta(hours=4),
      "exit_market_stop_loss": timedelta(days=4),
      "exit_market_stop_gain": timedelta(hours=1)
    }
  },
  "TechnicalTrader": {
    "MARGIN_PERCENTAGE": 1.0,
    "MINIMUM_HOLDING_TIME": timedelta(hours=2),
    "EXECUTION_TIME_LIMIT": timedelta(hours=3),
    "cool_offs": {
      "request": timedelta(hours=2),
      "enter_market": timedelta(hours=1),
      "exit_market_stop_loss": timedelta(hours=1),
      "exit_market_stop_gain": timedelta(hours=1)
    }
  },
  "JumpRecoveryTrader": {
    "MARGIN_PERCENTAGE": 1.0,
    "EXECUTION_TIME_LIMIT": timedelta(hours=3),
	"TRUNCATION_THRESHOLD": 1.2,
	"JUMP_CALCULATION_TIME": time(9, 30),
    "cool_offs": {
      "request": timedelta(hours=2),
      "enter_market": timedelta(hours=1),
      "exit_market_stop_loss": timedelta(hours=1),
      "exit_market_stop_gain": timedelta(hours=1)
    },
    "LimitOrderParams": {
      "proportional_adjustment": 0,
      "absolute_adjustment": 0.01
    },
    "VWAPOrderParams": {
      "maxPctVol": 0.10,
      "minimumTimeBlock": "10T",
      "allowPastEndTime": 1,
      "noTakeLiq": 0
    }
  },
  "EarningsTrader": {
    "MARGIN_PERCENTAGE": 1.0,
    "EXECUTION_TIME_LIMIT": timedelta(hours=1),
    "NO_TRADING_BUFFER_AROUND_EVENT": timedelta(minutes=30),
    "ENTER_TRADE_TIMEDELTA_WINDOW": timedelta(hours=1),
    "category_filter_location": "./Earnings_calibration/",
    "g_ens_threshold": 100,
    "relevance_threshold": 100,
    "ess_upper_threshold": 80,
    "ess_lower_threshold": 20,
    "nip_threshold": 10,
    "lookback" : "5B",
    "filter_before_trade": True,
    "filter_after_trade": False,
    "cool_offs": {
      "request": timedelta(minutes=30),
      "enter_market": timedelta(minutes=30),
      "exit_market": timedelta(minutes=30)
    },
    "LimitOrderParams": {
      "proportional_adjustment": 0,
      "absolute_adjustment": 0.01
    },
    "VWAPOrderParams": {
      "maxPctVol": 0.10,
      "minimumTimeBlock": "10T",
      "allowPastEndTime": 1,
      "noTakeLiq": 0
    }
  },
  "TradingUnit": {
    "supervisor_suffix": ":SUP",
    "risk_manager_suffix": ":RM",
  },
  "PairTradingUnit": {
    "supervisor_parameters": {
      "total_funding": 2500000,
      "fundingRequestsAmount": 50000,
      "funding_buffer": 50000
    },
	"override_filter": "all",
	"instructions_overrides": {}
	#"override_filter": "all",
	#"instructions_overrides": {
	  #"short_spread_limits": (1.0, -1.25),
	  #"long_spread_limits": (-1.0, 1.25),
	  #"stop_limits_pct": (-0.20, 0.50)
	#}
  },
  "RavenpackEventTradingUnit": {
	"max_technical_indicator_lookback": "20B",
	"max_event_lookback": "5B",
	"reset_indicator_daily": True,
    "supervisor_parameters": {
      "total_funding": 2500000,
      "fundingRequestsAmount": 50000,
      "funding_buffer": 50000
    },
	"override_filter": "all",
	"instructions_overrides": {},
  },
  "DragonfishTradingUnit": {
  "sentiment_max_lookback": "1B",
  "supervisor_parameters": {
      "total_funding": 2700000,
      "fundingRequestsAmount": 20000,
      "funding_buffer": 50000
    },
	"override_filter": "all",
	"instructions_overrides": {},
  },
  "TestTradingUnit": {
  "compounding": True,
  "supervisor_parameters": {
      "total_funding": 2700000,
      "fundingRequestsAmount": 40000,
      "funding_buffer": 50000
    },
	"override_filter": "all",
	"instructions_overrides": {},
  },
  "JumpRecoveryUnit": {
	"equity_max_lookback": "100B",
	"sentiment_max_lookback": "3B",
	"reset_indicator_daily": True,
      "compounding": True,
    "supervisor_parameters": {
      "total_funding": 2500000,
      "fundingRequestsAmount": 50000,
      "funding_buffer": 50000
    },
	"override_filter": "all",
	"instructions_overrides": {},
  },
  "EarningsTradingUnit": {
	"max_lookback": "10B",
	"min_shares_to_trade": 5,
    "supervisor_parameters": {
      "total_funding": 1000000,
      "fundingRequestsAmount": 100000,
      "funding_buffer": 50000
    },
	"override_filter": "all",
	"instructions_overrides": {},
  },
  "BuybackTradingUnit": {
	"max_lookback": "20B",
    "supervisor_parameters": {
      "total_funding": 1000000,
      "fundingRequestsAmount": 100000,
      "funding_buffer": 50000
    },
	"override_filter": "all",
	"instructions_overrides": {},
  },
  "TechnicalTradingUnit": {
	"max_lookback": "25B",
	"reset_indicator_daily": True,
    "supervisor_parameters": {
      "total_funding": 2500000,
      "fundingRequestsAmount": 50000,
      "funding_buffer": 50000
    },
	"override_filter": "all",
	"instructions_overrides": {},
  },
  "OLMARTradingUnit": {
	"supervisor_parameters": {
      "total_funding": 1000000,
      "fundingRequestsAmount": 100000,
      "funding_buffer": 50000
    },
	"override_filter": "all",
	"instructions_overrides": {},
  },
  "ViewsInMarketTradingUnit": {
    "supervisor_parameters": {
      "total_funding": 2500000,
      "fundingRequestsAmount": 100000,
      "funding_buffer": 50000
    },
	"override_filter": "all",
	"instructions_overrides": {},
  },
  "DataServicesUnit": {
	"Server_identity": "DataServer",
	"override_filter": "all",
	"instructions_overrides": {}
  },
  "GlobalManagementUnitZiplineQuantopian": {
	"override_filter": "all",
	"instructions_overrides": {}
  },
  "GlobalManagementUnit_IB": {
	"override_filter": "all",
	"instructions_overrides": {}
  },
  "ExecutionUnitZiplineQuantopian": {
	"ERM_identity": "ExecutionRM",
	"Execution_coordinator_identity": "Executor",
	"override_filter": "all",
	"instructions_overrides": {}
  },
  "ExecutionUnitIB": {
	"ERM_identity": "ExecutionRM",
	"Execution_coordinator_identity": "Executor",
	"override_filter": "all",
	"instructions_overrides": {}
  },
  "BrokerConnectionZiplineQuantopian": {
    "multiplicative_conservative_adjustment_for_execution_price": 0.0,
    "additive_transaction_cost": 0.06,
    "commission_per_share_amount_for_longs": 0.005,
    "commission_per_share_amount_for_shorts": 0.0075,
    "min_commission_per_order": 1.0
  },
  "TradeExecutor": {
    "EXIT_TIME_FOR_ALL_TRADES": time(15, 55)
  },
  "ExecutionRiskManager": {
    "order_buffer_holding_time_period": pd.Timedelta(minutes=5),
    "execution_rm_concentration_limit": 215000,
    "execution_rm_slippage_and_transaction_cost_estimate": 0.001
  },
  "IntuitionSetup": {
    "unit_actor_separator" : ":",
    "state_dir" : path.abspath(path.join(path.dirname(__file__), '..', '..', 'state')),
    "save_state_in_backtesting": False,
	"GlobalManagementUnit": {
	  "GMU_identity": "global_mgmt_unit",
	  "configuration_location": "./gmu_setup",
	  "configuration_filename": "gmu.csv",
	},
    "ExecutionUnit": {
      "configuration_location":"s3://dcm-production-processes/overnight/calibrations/cointegration/final_results/",
      "configuration_filename": "executionUnit.csv",
    },
    "DataServicesUnit": {
      #"configuration_location": "./Calibration_override/",
      "configuration_location": "s3://dcm-production-processes/overnight/calibrations/cointegration/final_results/",
      "configuration_filename": "marketServerUnit.csv",
    },
    "TradingUnits": {
      # !!!PLEASE DO NOT PUT ANYTHING HERE. USE YOUR PERSONAL .intuition.conf FILE TO INSTANTIATE UNITS FOR TESTING !!!

      # EVERYTHING COMMENTED OUT BEFORE IS SIMPLY FOR CONVENIENCE AND REFERENCE. COPY IT INTO YOUR PERSONAL FILE

      #"PTUnitRP":{
      #  "configuration_location": "./Calibration_3/",
      #  "configuration_location": "s3://dcm-production-processes/overnight/calibrations/cointegration/final_results/",
      #  "configuration_filename": "pairsParameters.csv",
      #  "unit_type": "PairTradingUnit_RP",
      #}
      #"PTUnit":{
      ##  "configuration_location": "./Calibration_3/",w
      ##  "configuration_location": "s3://dcm-production-processes/overnight/calibrations/cointegration/final_results/",
        #"configuration_location": "s3://dcm-production-processes/overnight/calibrations/recovery_testing/",
		#"configuration_filename": "pairsParameters.csv",
        #"unit_type": "PairTradingUnit",
      #},
      #"EarningsUnit":{
        #"configuration_location": "./Earnings_calibration_test/",
        ##"configuration_location": "s3://dcm-production-processes/overnight/calibrations/recovery_testing/",
		#"configuration_filename": "earnings.csv",
        #"unit_type": "EarningsTradingUnit",
      #},
      #"OLMARUnit": {
      #  "configuration_location": "./olmar_calibration/",
      #  "configuration_filename": "olmar_baskets.csv",
      #  "unit_type": "OLMARTradingUnit",
	  #},
      #"TTUnit":{
        #"configuration_location": "./technical_calibration/",
		##"configuration_location": "s3://dcm-production-processes/overnight/calibrations/cointegration/final_results/",
		##"configuration_location": "s3://dcm-production-processes/overnight/calibrations/recovery_testing/",
		#"configuration_filename": "technical_trading.csv",
		#"unit_type": "TechnicalTradingUnit",
      #},
	  #"JRUnit":{
        #"configuration_location": "./jump_calibration/",
		##"configuration_location": "s3://dcm-production-processes/overnight/calibrations/cointegration/final_results/",
		##"configuration_location": "s3://dcm-production-processes/overnight/calibrations/recovery_testing/",
		#"configuration_filename": "jump_recovery.csv",
		#"unit_type": "JumpRecoveryUnit",
      #},
      #"RPEvents": {
        ####"configuration_location": "s3://dcm-production-processes/overnight/calibrations/ravenpack_events/final_results/",
        #"configuration_location": "./rpevents_calibration/",
		####"configuration_location": "s3://dcm-production-processes/overnight/calibrations/recovery_testing/",
		#"configuration_filename": "ravenpack_events.csv",
        #"unit_type": "RavenpackEventTradingUnit",
      #},
      #"BuybackUnit": {
	#"configuration_location": "./buyback_calibration/",
		##"configuration_location": "./backtest_calibration/",
		#"configuration_filename": "buyback_trading.csv",
	#"unit_type": "BuybackTradingUnit",
      #}
    }
  },
  "DataSlicer": {
    "LENGTH_OF_THE_TIMELINE": pd.tseries.offsets.BDay(2),
    "DEFAULT_SERVING_START_TIME": time(9, 28),
    "DEFAULT_SERVING_END_TIME": time(15, 58),
	"DEFAULT_DATA_SLICER_BUFFER_TIME" : timedelta(seconds=0)
  },
  "DataProvider":
  {
    "YahooQuotesDataProvider": {
	  "DATA_SLICER_BUFFER_TIME" : timedelta(seconds=0)
	},
    "ZiplineDataProvider": {
	  "DATA_SLICER_BUFFER_TIME" : timedelta(seconds=0)
	},
    "RealtimeRavenPackDataProvider": {
	  "DATA_SLICER_BUFFER_TIME" : timedelta(seconds=0)
	},
	"InteractiveBrokersEquityDataProvider": {
	  "DATA_SLICER_BUFFER_TIME" : timedelta(seconds=2)
	},
	"BacktestRedshiftRavenPackDataProvider": {
	  "DATA_SLICER_BUFFER_TIME" : timedelta(seconds=0)
	}
  },
  "TradingBusinessHour": {
    "default_workday_start_time": time(9, 30),
    "default_workday_end_time": time(16,0)
  },
  "GlobalManagementUnit": {
    "BOOTING_UP_TIME": time(8, 20),
    "RTH_BEGIN_TIME" : time(9, 30),
    "RTH_END_TIME": time(15, 59)
  }
}